{% extends 'base.html' %}
{% load humanize %}

{% block title %} | User Dashboard {% endblock %}
{% block content %}
<section id="showcase-inner" class="py-5 text-white">
    <div class="container">
      <div class="row text-center">
        <div class="col-md-12">
          <h1 class="display-4">User Dashboard</h1>
          <p class="lead">Manage your BT Real Estate account</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Alerts -->
  {% include 'partials/_alerts.html' %}

  <section id="dashboard" class="py-4">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <h2>Welcome, {{ user.first_name }}!</h2>
          <p>Portfolio</p>
          
          {% if trans %}
          <table class="table">
            <thead>   
              <tr>
                <th scope="col">Coin</th>
                <th scope="col">Exchange</th>
                <th scope="col">Last Price</th>
                <th scope="col">Qty</th>
                <th scope="col">Cost</th>
                <th scope="col">Value</th>
                <th scope="col">Gain/Loss</th>
              </tr>
            </thead>
            <tbody>
              {% for tran in trans %}
              <tr>
                <td>{{ tran.coin }}</td>
                <td>{{ tran.exchange }}</td>
                <td align="right">{{ tran.transType }}</td>
                <td align="right">$ {{ tran.qty|intcomma }}</td>
                <td align="right">$ {{ tran.priceAtBought|intcomma }}</td>
                <td align="right">$ {{ tran.fees|intcomma }}</td>
                <td align="right" style="font-weight: bold">$ {{ tran.total|intcomma }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        {% else %}
          <p>You do not have any transaction.</p>
        {% endif %}
        <div class="row">
          <div class="col-md-12">
            {% if trans.has_other_pages %}
              <ul class="pagination">
                {% if trans.has_previous %}
                  <li class="page-item">
                    <a href="?page=1" class="page-link">|&laquo;</a>
                  </li>
                {% else %}
                <li class="page-item disabled">
                  <a class="page-link">|&laquo;</a>
                </li>
                {% endif %}
                {% if trans.has_previous %}
                  <li class="page-item">
                    <a href="?page={{ trans.previous_page_number }}" class="page-link">&laquo;</a>
                  </li>
                {% else %}
                <li class="page-item disabled">
                  <a class="page-link">&laquo;</a>
                </li>
                {% endif %}
                {% for i in trans.paginator.page_range %}
                  {% if trans.number == i %}
                    <li class="page-item active">
                      <a class="page-link">{{i}}</a>
                    </li>
                  {% else %}
                    <li class="page-item">
                      <a href="?page={{i}}" class="page-link">{{i}}</a>
                    </li>
                  {% endif %}
                {% endfor %}
                {% if trans.has_next %}
                  <li class="page-item">
                    <a href="?page={{ trans.next_page_number }}" class="page-link">&raquo;</a>
                  </li>
                {% else %}
                <li class="page-item disabled">
                  <a class="page-link">&raquo;</a>
                </li>
                {% endif %}
                {% if trans.has_next %}
                  <li class="page-item">
                    <a href="?page={{ trans.paginator.num_pages }}" class="page-link">&raquo;|</a>
                  </li>
                {% else %}
                <li class="page-item disabled">
                  <a class="page-link">&raquo;|</a>
                </li>
                {% endif %}
              </ul>
            {% endif %}
          </div>
        </div>
        </div>
      </div>
    </div>
  </section>
  {% endblock %}